<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fleet Management — Admin Dashboard</title>
  <style>
    :root{--bg:#f3f4f6;--card:#fff;--muted:#6b7280}
    body{margin:0;font-family:Arial,Helvetica,sans-serif;background:var(--bg);min-height:100vh}

    /* Navbar */
    header{background:#fff;padding:10px 16px;display:flex;align-items:center;gap:12px;box-shadow:0 2px 6px rgba(0,0,0,0.05);position:sticky;top:0;z-index:10}
    header h1{font-size:18px;margin:0}
    .filters{margin-left:auto;display:flex;gap:8px;align-items:center}
    select, button{padding:8px;border-radius:6px;border:1px solid #d1d5db}
    button{background:#0b5ed7;color:#fff;border:0;cursor:pointer}

    /* Layout */
    .layout{display:grid;grid-template-columns:300px 1fr;gap:16px;padding:18px}

    /* Sidebar */
    .sidebar{background:var(--card);padding:16px;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,0.04)}
    .sidebar h2{margin:0 0 10px;font-size:16px}
    .form-row{margin-bottom:10px}
    .form-row label{display:block;font-size:13px;color:var(--muted)}
    .form-row input[type=text], .form-row select{width:100%;padding:8px;border:1px solid #d1d5db;border-radius:6px}
    .form-row .checkbox-row{display:flex;align-items:center;gap:8px}
    .add-btn{margin-top:10px;width:100%;padding:10px;border-radius:6px;border:0;background:#059669;color:#fff;cursor:pointer}

    /* Main content */
    .main{display:flex;flex-direction:column;gap:12px}
    .cards{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .card{background:var(--card);padding:12px;border-radius:10px;box-shadow:0 8px 20px rgba(0,0,0,0.05);display:flex;flex-direction:column;gap:8px}
    .card img{width:100%;height:130px;object-fit:cover;border-radius:8px}
    .card .meta{display:flex;justify-content:space-between;align-items:center}
    .card .meta .left{font-weight:600}
    .card .meta .right{font-size:12px;color:var(--muted)}
    .actions{display:flex;gap:8px}
    .actions button{flex:1;padding:8px;border-radius:6px;border:1px solid #d1d5db;background:#fff;cursor:pointer}
    .actions .danger{border-color:#ef4444;color:#ef4444}
    .status-available{color:#059669;font-weight:700}
    .status-unavailable{color:#ef4444;font-weight:700}

    /* Responsive */
    @media(max-width:1000px){.cards{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:640px){.layout{grid-template-columns:1fr;padding:12px}.cards{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <h1>Fleet Management — Admin Dashboard</h1>
    <div class="filters">
      <label for="filterCategory">Category</label>
      <select id="filterCategory">
        <option value="all">All</option>
        <option value="Auto">Auto</option>
        <option value="Car">Car</option>
        <option value="Truck">Truck</option>
        <option value="Bus">Bus</option>
      </select>

      <label for="filterAvailability">Availability</label>
      <select id="filterAvailability">
        <option value="all">All</option>
        <option value="Available">Available</option>
        <option value="Unavailable">Unavailable</option>
      </select>

      <button id="clearFilters">Clear Filter</button>
    </div>
  </header>

  <div class="layout">
    <aside class="sidebar">
      <h2>Add Fleet Vehicle</h2>
      <div class="form-row">
        <label for="regNo">Reg No of Vehicle *</label>
        <input id="regNo" type="text" placeholder="KA01AB1234" />
      </div>
      <div class="form-row">
        <label for="category">Category *</label>
        <select id="category">
          <option value="">-- Select --</option>
          <option value="Auto">Auto</option>
          <option value="Car">Car</option>
          <option value="Truck">Truck</option>
          <option value="Bus">Bus</option>
        </select>
      </div>
      <div class="form-row">
        <label for="driver">Driver Name *</label>
        <input id="driver" type="text" placeholder="Driver full name" />
      </div>
      <div class="form-row">
        <label>Is Available</label>
        <div class="checkbox-row">
          <input id="isAvailable" type="checkbox" checked />
          <label for="isAvailable">Available</label>
        </div>
      </div>
      <button id="addFleet" class="add-btn">Add Fleet</button>

      <p style="font-size:12px;color:var(--muted);margin-top:12px">* Required fields. Cards show 3 per row on wide screens.</p>
    </aside>

    <main class="main">
      <section class="cards" id="cardsContainer">
        <!-- Fleet cards will be injected here -->
      </section>
    </main>
  </div>

  <script>
    // Placeholder image for vehicle cards
    const VEHICLE_IMG = 'https://via.placeholder.com/600x300?text=Vehicle+Image';

    // Elements
    const regNoInput = document.getElementById('regNo');
    const categoryInput = document.getElementById('category');
    const driverInput = document.getElementById('driver');
    const isAvailableInput = document.getElementById('isAvailable');
    const addBtn = document.getElementById('addFleet');
    const cardsContainer = document.getElementById('cardsContainer');

    const filterCategory = document.getElementById('filterCategory');
    const filterAvailability = document.getElementById('filterAvailability');
    const clearFiltersBtn = document.getElementById('clearFilters');

    // Fleet data (persist in localStorage)
    let fleet = JSON.parse(localStorage.getItem('fleetData') || '[]');

    // Save to localStorage
    function saveFleet() {
      localStorage.setItem('fleetData', JSON.stringify(fleet));
    }

    // Helper: validate form
    function validateForm(regNo, category, driver) {
      if (!regNo || regNo.trim() === '') return {ok:false,msg:'Reg No is required'};
      if (!category || category.trim() === '') return {ok:false,msg:'Category is required'};
      if (!driver || driver.trim() === '') return {ok:false,msg:'Driver Name is required'};
      return {ok:true};
    }

    // Add fleet
    addBtn.addEventListener('click', () => {
      const regNo = regNoInput.value.trim();
      const category = categoryInput.value;
      const driver = driverInput.value.trim();
      const isAvailable = isAvailableInput.checked;

      const valid = validateForm(regNo, category, driver);
      if (!valid.ok) { alert(valid.msg); return; }

      // Create new vehicle object
      const vehicle = {
        id: Date.now().toString(),
        regNo, category, driver, availability: isAvailable ? 'Available' : 'Unavailable'
      };

      fleet.push(vehicle);
      saveFleet();
      renderCards();

      // Clear form
      regNoInput.value = '';
      categoryInput.value = '';
      driverInput.value = '';
      isAvailableInput.checked = true;
    });

    // Render cards with optional filtering
    function renderCards() {
      // Apply filters
      const catFilter = filterCategory.value;
      const availFilter = filterAvailability.value;

      const filtered = fleet.filter(v => {
        if (catFilter && catFilter !== 'all' && v.category !== catFilter) return false;
        if (availFilter && availFilter !== 'all' && v.availability !== availFilter) return false;
        return true;
      });

      cardsContainer.innerHTML = '';

      if (filtered.length === 0) {
        cardsContainer.innerHTML = '<div style="grid-column:1/-1;padding:18px;background:#fff;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,0.03);text-align:center;color:var(--muted)">No vehicles to show.</div>';
        return;
      }

      filtered.forEach(vehicle => {
        const card = document.createElement('div');
        card.className = 'card';

        const img = document.createElement('img');
        img.src = VEHICLE_IMG;
        img.alt = 'Vehicle image';

        const meta = document.createElement('div');
        meta.className = 'meta';
        const left = document.createElement('div');
        left.className = 'left';
        left.textContent = vehicle.regNo + ' — ' + vehicle.category;
        const right = document.createElement('div');
        right.className = 'right';
        right.textContent = 'Driver: ' + vehicle.driver;

        meta.appendChild(left);
        meta.appendChild(right);

        const availability = document.createElement('div');
        availability.textContent = vehicle.availability;
        availability.className = vehicle.availability === 'Available' ? 'status-available' : 'status-unavailable';

        const actions = document.createElement('div');
        actions.className = 'actions';

        // Update Driver
        const updateBtn = document.createElement('button');
        updateBtn.textContent = 'Update Driver';
        updateBtn.addEventListener('click', () => {
          const newName = prompt('Enter new driver name', vehicle.driver);
          if (newName === null) return; // user cancelled
          if (newName.trim() === '') { alert('Driver name cannot be empty.'); return; }
          vehicle.driver = newName.trim();
          saveFleet();
          renderCards();
        });

        // Change Availability
        const availBtn = document.createElement('button');
        availBtn.textContent = 'Change Availability';
        availBtn.addEventListener('click', () => {
          vehicle.availability = vehicle.availability === 'Available' ? 'Unavailable' : 'Available';
          saveFleet();
          renderCards();
        });

        // Delete
        const delBtn = document.createElement('button');
        delBtn.textContent = 'Delete Vehicle';
        delBtn.className = 'danger';
        delBtn.addEventListener('click', () => {
          const ok = confirm('Are you sure you want to delete vehicle ' + vehicle.regNo + '?');
          if (!ok) return;
          fleet = fleet.filter(v => v.id !== vehicle.id);
          saveFleet();
          renderCards();
        });

        actions.appendChild(updateBtn);
        actions.appendChild(availBtn);
        actions.appendChild(delBtn);

        card.appendChild(img);
        card.appendChild(meta);
        card.appendChild(availability);
        card.appendChild(actions);

        cardsContainer.appendChild(card);
      });
    }

    // Filters
    filterCategory.addEventListener('change', renderCards);
    filterAvailability.addEventListener('change', renderCards);
    clearFiltersBtn.addEventListener('click', () => {
      filterCategory.value = 'all';
      filterAvailability.value = 'all';
      renderCards();
    });

    // Initial render
    renderCards();
  </script>
</body>
</html>




